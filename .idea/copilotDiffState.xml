<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/backend/pom_new.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend/pom_new.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&#10;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#10;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#10;    &lt;parent&gt;&#10;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;        &lt;version&gt;3.2.5&lt;/version&gt;&#10;        &lt;relativePath/&gt;&#10;    &lt;/parent&gt;&#10;&#10;    &lt;groupId&gt;com.example&lt;/groupId&gt;&#10;    &lt;artifactId&gt;BudgetBites&lt;/artifactId&gt;&#10;    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;    &lt;name&gt;BudgetBites&lt;/name&gt;&#10;    &lt;description&gt;BudgetBites&lt;/description&gt;&#10;&#10;    &lt;properties&gt;&#10;        &lt;java.version&gt;21&lt;/java.version&gt;&#10;    &lt;/properties&gt;&#10;&#10;    &lt;dependencies&gt;&#10;        &lt;!-- Core Spring Boot --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- Email support --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- Persistence --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- PostgreSQL JDBC driver --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- Testing --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;    &lt;/dependencies&gt;&#10;&#10;    &lt;build&gt;&#10;        &lt;plugins&gt;&#10;            &lt;plugin&gt;&#10;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;            &lt;/plugin&gt;&#10;        &lt;/plugins&gt;&#10;    &lt;/build&gt;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/backend/src/main/java/com/example/budgetbites/EmailConfig.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend/src/main/java/com/example/budgetbites/EmailConfig.java" />
              <option name="updatedContent" value="package com.example.budgetbites;&#10;&#10;import org.springframework.beans.factory.annotation.Value;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.mail.javamail.JavaMailSender;&#10;import org.springframework.mail.javamail.JavaMailSenderImpl;&#10;import org.slf4j.Logger;&#10;import org.slf4j.LoggerFactory;&#10;&#10;import java.util.Properties;&#10;&#10;@Configuration&#10;public class EmailConfig {&#10;    &#10;    private static final Logger logger = LoggerFactory.getLogger(EmailConfig.class);&#10;&#10;    @Value(&quot;${spring.mail.host}&quot;)&#10;    private String host;&#10;&#10;    @Value(&quot;${spring.mail.port}&quot;)&#10;    private int port;&#10;&#10;    @Value(&quot;${spring.mail.username}&quot;)&#10;    private String username;&#10;&#10;    @Value(&quot;${spring.mail.password}&quot;)&#10;    private String password;&#10;&#10;    @Bean&#10;    public JavaMailSender getJavaMailSender() {&#10;        logger.info(&quot;Konfiguruji Gmail mailer pro uživatele: {}&quot;, username);&#10;        &#10;        JavaMailSenderImpl mailSender = new JavaMailSenderImpl();&#10;        mailSender.setHost(host);&#10;        mailSender.setPort(port);&#10;        mailSender.setUsername(username);&#10;        mailSender.setPassword(password);&#10;&#10;        Properties props = mailSender.getJavaMailProperties();&#10;        props.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);&#10;        props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);&#10;        props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);&#10;        props.put(&quot;mail.smtp.starttls.required&quot;, &quot;true&quot;);&#10;        props.put(&quot;mail.smtp.ssl.trust&quot;, host);&#10;        props.put(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);&#10;        props.put(&quot;mail.debug&quot;, &quot;true&quot;);&#10;        props.put(&quot;mail.smtp.connectiontimeout&quot;, &quot;5000&quot;);&#10;        props.put(&quot;mail.smtp.timeout&quot;, &quot;5000&quot;);&#10;        props.put(&quot;mail.smtp.writetimeout&quot;, &quot;5000&quot;);&#10;&#10;        logger.info(&quot;Email konfigurace připravena pro host: {} na portu: {}&quot;, host, port);&#10;        return mailSender;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/backend/src/main/java/com/example/budgetbites/EmailService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend/src/main/java/com/example/budgetbites/EmailService.java" />
              <option name="updatedContent" value="package com.example.budgetbites;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.beans.factory.annotation.Value;&#10;import org.springframework.mail.SimpleMailMessage;&#10;import org.springframework.mail.javamail.JavaMailSender;&#10;import org.springframework.stereotype.Service;&#10;import org.slf4j.Logger;&#10;import org.slf4j.LoggerFactory;&#10;&#10;@Service&#10;public class EmailService {&#10;&#10;    private static final Logger logger = LoggerFactory.getLogger(EmailService.class);&#10;&#10;    @Autowired&#10;    private JavaMailSender mailSender;&#10;&#10;    @Value(&quot;${spring.mail.username}&quot;)&#10;    private String fromEmail;&#10;&#10;    public void sendVerificationCode(String toEmail, String verificationCode) {&#10;        try {&#10;            logger.info(&quot;Pokouším se odeslat email na adresu: {}&quot;, toEmail);&#10;            &#10;            SimpleMailMessage message = new SimpleMailMessage();&#10;            message.setTo(toEmail);&#10;            message.setSubject(&quot;BudgetBites - Ověření registrace&quot;);&#10;            message.setText(&quot;Váš ověřovací kód je: &quot; + verificationCode +&#10;                           &quot;\n\nTento kód je platný po dobu 10 minut.&quot; +&#10;                           &quot;\n\nBudgetBites Team&quot;);&#10;            message.setFrom(fromEmail);&#10;&#10;            logger.info(&quot;Odesílám email z adresy: {} na adresu: {}&quot;, fromEmail, toEmail);&#10;            mailSender.send(message);&#10;            logger.info(&quot;Email byl úspěšně odeslán na adresu: {}&quot;, toEmail);&#10;            &#10;        } catch (Exception e) {&#10;            logger.error(&quot;Chyba při odesílání emailu na adresu {}: {}&quot;, toEmail, e.getMessage(), e);&#10;            throw new RuntimeException(&quot;Nepodařilo se odeslat ověřovací email: &quot; + e.getMessage(), e);&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/backend/src/main/java/com/example/budgetbites/EmailTestController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend/src/main/java/com/example/budgetbites/EmailTestController.java" />
              <option name="updatedContent" value="package com.example.budgetbites;&#10;&#10;import org.springframework.beans.factory.annotation.Autowired;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/test&quot;)&#10;public class EmailTestController {&#10;    &#10;    @Autowired&#10;    private EmailService emailService;&#10;    &#10;    @PostMapping(&quot;/email&quot;)&#10;    public ResponseEntity&lt;String&gt; testEmail(@RequestParam String email) {&#10;        try {&#10;            emailService.sendVerificationCode(email, &quot;123456&quot;);&#10;            return ResponseEntity.ok(&quot;Email byl úspěšně odeslán na adresu: &quot; + email);&#10;        } catch (Exception e) {&#10;            return ResponseEntity.status(500).body(&quot;Chyba při odesílání emailu: &quot; + e.getMessage());&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/backend/src/main/resources/application.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend/src/main/resources/application.properties" />
              <option name="updatedContent" value="spring.application.name=BudgetBites&#10;spring.datasource.url=jdbc:postgresql://localhost:5332/budgetbites&#10;spring.datasource.username=admin&#10;spring.datasource.password=password&#10;spring.datasource.driver-class-name=org.postgresql.Driver&#10;&#10;spring.jpa.hibernate.ddl-auto=create-drop&#10;spring.jpa.properties.hibernate.format_sql=true&#10;spring.jpa.show-sql=true&#10;&#10;# Server port&#10;server.port=8081&#10;&#10;# Email configuration pro Gmail - aktualizovane s novym App Password&#10;spring.mail.host=smtp.gmail.com&#10;spring.mail.port=587&#10;spring.mail.username=jakubpluhacek@gmail.com&#10;spring.mail.password=padzfqxabwfkwxai&#10;spring.mail.properties.mail.smtp.auth=true&#10;spring.mail.properties.mail.smtp.starttls.enable=true&#10;spring.mail.properties.mail.smtp.starttls.required=true&#10;spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com&#10;spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2&#10;spring.mail.properties.mail.transport.protocol=smtp&#10;spring.mail.properties.mail.debug=true&#10;spring.mail.test-connection=false" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>